"use strict";(self.webpackChunkstock_tracker=self.webpackChunkstock_tracker||[]).push([[592],{4521:(f,d,e)=>{e.d(d,{P:()=>_});var l=e(6895),u=e(4004),i=e(262),r=e(9646),h=e(2340),s=e(8275),m=e(8256),p=e(529),c=e(6383);let _=(()=>{class t{constructor(o,a){this.http=o,this.logger=a}fetchQuote(o){const a=this.buildUri(`quote?symbol=${o}`);return this.http.get(a).pipe((0,u.U)(g=>new s.pu(g.dp,g.o,g.c,g.h)),(0,i.K)(g=>(this.logger.error(g),(0,r.of)(null))))}fetchCompanyName(o){const a=this.buildUri(`search?q=${o}`);return this.http.get(a).pipe((0,u.U)(g=>this.findSuitableCompanyName(o,g)),(0,i.K)(g=>(this.logger.error(g),(0,r.of)(null))))}fetchSentimentData(o,a=new Date){const g=new Date(a.getFullYear(),a.getMonth(),0),E=this.formatDate(g),D=new Date(a.getFullYear(),a.getMonth()-3,1),S=this.formatDate(D),M=this.buildUri(`stock/insider-sentiment?symbol=${o}&from=${S}&to=${E}`);return this.http.get(M).pipe((0,u.U)(v=>v.data.map(y=>new s.Pm(y.month,y.year,y.change,y.mspr))),(0,i.K)(v=>(this.logger.error(v),(0,r.of)([]))))}findSuitableCompanyName(o,a){if(a.count<=0)return null;if(1===a.count)return a.result[0].description;const g=a.result.filter(E=>E.symbol===o);return g.length?g[0].description:a.result[0].description}buildUri(o){return`${t.BASE_URI}/${o}&token=${h.N.finnhubApiToken}`}formatDate(o){return(0,l.p6)(o,"yyyy-MM-dd","en-US")}}return t.BASE_URI="https://finnhub.io/api/v1",t.\u0275fac=function(o){return new(o||t)(m.LFG(p.eN),m.LFG(c.Y))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6383:(f,d,e)=>{e.d(d,{Y:()=>i});var l=e(2340),u=e(8256);let i=(()=>{class r{constructor(){}get isEnabled(){return!l.N.production}log(s,...m){this.isEnabled&&console.log(s,m)}error(s,...m){this.isEnabled&&console.error(s,m)}}return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},8275:(f,d,e)=>{e.d(d,{Pm:()=>u,Wd:()=>i,pu:()=>l});class l{constructor(h=0,s=0,m=0,p=0){this.change=h,this.openingPrice=s,this.currentPrice=m,this.highPrice=p}}class u{constructor(h,s,m=0,p=0){this.month=h,this.year=s,this.change=m,this.mspr=p,this.displayMonth="UNKNOWN",this.setupDisplayMonth(h)}setupDisplayMonth(h){if(h){const s=new Date;s.setMonth(h-1),this.displayMonth=s.toLocaleString("en-US",{month:"long"})}}}class i{constructor(h="",s,m){this.symbol=h,this.companyName=s,this.quote=m}}},702:(f,d,e)=>{e.d(d,{q:()=>p});var l=e(9646),u=e(8505),i=e(262),r=e(8256);let h=(()=>{class c{constructor(){}saveItem(t,n){localStorage.setItem(t,JSON.stringify(n))}getItem(t){const n=localStorage.getItem(t);return n?JSON.parse(n):null}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var s=e(6383),m=e(4521);let p=(()=>{class c{constructor(t,n,o){this.storage=t,this.logger=n,this.finnhubApi=o}get stocks(){return this.storage.getItem("stocks")??[]}addStock(t){const n=[...this.stocks];n.some(a=>a.symbol===t.symbol)?this.logger.log(`Stock with symbol "${t.symbol}" already exists!`):(n.push(t),this.storage.saveItem("stocks",n))}updateStock(t){const n=[...this.stocks],o=n.findIndex(a=>a.symbol===t.symbol);-1!==o?(n[o]=t,this.storage.saveItem("stocks",n)):this.logger.log(`Stock with symbol "${t.symbol}" doesn't exist!`)}getStockBySymbol(t){return[...this.stocks].find(o=>o.symbol===t)??null}getCompanyName(t){const n=this.getStockBySymbol(t);return n?n.companyName?(0,l.of)(n.companyName):this.finnhubApi.fetchCompanyName(t).pipe((0,u.b)(o=>{null!==o&&(n.companyName=o,this.updateStock(n))}),(0,i.K)(o=>(this.logger.error(o),(0,l.of)(null)))):(0,l.of)(null)}getQuote(t){const n=this.getStockBySymbol(t);return n?n.quote?(0,l.of)(n.quote):this.finnhubApi.fetchQuote(t).pipe((0,u.b)(o=>{null!==o&&(n.quote=o,this.updateStock(n))}),(0,i.K)(o=>(this.logger.error(o),(0,l.of)(null)))):(0,l.of)(null)}removeStock(t){const n=[...this.stocks],o=n.findIndex(a=>a.symbol===t);-1!==o?(n.splice(o,1),this.storage.saveItem("stocks",n)):this.logger.log(`Stock with symbol "${t}" doesn't exist!`)}}return c.\u0275fac=function(t){return new(t||c)(r.LFG(h),r.LFG(s.Y),r.LFG(m.P))},c.\u0275prov=r.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},2123:(f,d,e)=>{e.d(d,{s:()=>p});var l=e(9646),u=e(4004),i=e(8256),r=e(702),h=e(6895);function s(c,_){if(1&c&&(i.TgZ(0,"h1"),i._uU(1),i.qZA()),2&c){const t=_.ngIf;i.xp6(1),i.hij(" ",t,"\n")}}function m(c,_){1&c&&(i.TgZ(0,"h1"),i._uU(1,"\u23f3 Loading ..."),i.qZA())}let p=(()=>{class c{constructor(t){this.stockService=t,this.symbol="",this.showSymbol=!1,this.displayName$=(0,l.of)("Unknown")}ngOnInit(){this.displayName$=this.stockService.getCompanyName(this.symbol).pipe((0,u.U)(t=>{const n=t??"Unknown";return this.showSymbol?`${n} (${this.symbol})`:n}))}}return c.\u0275fac=function(t){return new(t||c)(i.Y36(r.q))},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-company-name"]],inputs:{symbol:"symbol",showSymbol:"showSymbol"},decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loading",""]],template:function(t,n){if(1&t&&(i.YNc(0,s,2,1,"h1",0),i.ALo(1,"async"),i.YNc(2,m,2,0,"ng-template",null,1,i.W1O)),2&t){const o=i.MAs(3);i.Q6J("ngIf",i.lcZ(1,2,n.displayName$))("ngIfElse",o)}},dependencies:[h.O5,h.Ov],styles:["h1[_ngcontent-%COMP%]{display:inline}"]}),c})()},4466:(f,d,e)=>{e.d(d,{m:()=>i});var l=e(6895),u=e(8256);let i=(()=>{class r{}return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=u.oAB({type:r}),r.\u0275inj=u.cJS({imports:[l.ez]}),r})()},6765:(f,d,e)=>{e.d(d,{x:()=>i});var l=e(8256);let i=(()=>{class r{constructor(s,m){this.el=s,this.renderer=m,this.change=0}set indicator(s){this.setIcon(s.icon),this.setColor(s.color)}ngOnInit(){this.setFontSize(),this.indicator=this.change>0?{icon:"&#11014;",color:"green"}:this.change<0?{icon:"&#11015;",color:"red"}:{icon:"&#8722;",color:"black"}}setFontSize(s=40){this.renderer.setStyle(this.el.nativeElement,"font-size",`${s}px`)}setIcon(s){this.renderer.setProperty(this.el.nativeElement,"innerHTML",s)}setColor(s){this.renderer.setStyle(this.el.nativeElement,"color",s)}}return r.\u0275fac=function(s){return new(s||r)(l.Y36(l.SBq),l.Y36(l.Qsj))},r.\u0275dir=l.lG2({type:r,selectors:[["","appTrendIndicator",""]],inputs:{change:"change"}}),r})()}}]);